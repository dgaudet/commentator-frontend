{
  "version": "1.0.0",
  "workspace": {
    "path": "/Users/dean.gaudet/Documents/code/non-work/commentator-repos/commentator-frontend",
    "name": "commentator-frontend"
  },
  "latest": {
    "contextFile": "/Users/dean.gaudet/Documents/code/non-work/commentator-repos/commentator-frontend/.pdd/design/System Architect-1761089555804.md",
    "timestamp": 1761089555804,
    "persona": "System Architect",
    "feature": "design",
    "task": "Outcome Comments Management Feature - Technical Design Request\n\nContext: I have completed the product requirements and user stories for an Outcome Comments Management feature that allows teachers to view, create, and delete outcome comments associated with their classes.\n\nFeature Overview:\n- Complexity Level: L1-MICRO (1-2 weeks, 14 story points)\n- Architecture Review: SKIPPED (L1 level - straightforward CRUD operations)\n- Integration Point: Extends existing Class Management UI with new workflow\n\nUser Stories Delivered (5 Total - 14 Story Points):\n\nMVP Scope - MUST HAVE (13 points):\n1. US-OUTCOME-001: Navigate to Outcome Comments Management (2 pts, HIGH)\n2. US-OUTCOME-002: View Outcome Comments for a Class (3 pts, HIGH)\n3. US-OUTCOME-003: Create New Outcome Comment (5 pts, HIGH)\n4. US-OUTCOME-004: Delete Outcome Comment (3 pts, MEDIUM)\n\nSHOULD HAVE (1 point):\n5. US-OUTCOME-005: Return to Class List (1 pt, MEDIUM)\n\nOutcomeComment Entity Definition:\n- id: number (auto-generated)\n- classId: number (foreign key)\n- commentText: string (10-500 chars, required)\n- createdAt: string (ISO 8601)\n- updatedAt: string (ISO 8601)\n\nValidation Rules:\n- commentText: Required, 10-500 characters, trim whitespace, case-insensitive duplicate detection per class\n- classId: Must reference valid existing class\n- Business Rule: Duplicate comments not allowed within same class\n\nAPI Endpoints Required:\n- GET /outcome-comment?classId=:id\n- POST /outcome-comment\n- DELETE /outcome-comment/:id\n\nSuccess Metrics and Performance Targets:\n- Page Load Time: < 2 seconds\n- API Response Time: < 200ms\n- Test Coverage: 90%+\n- Bundle Size Impact: < 20 KB gzipped\n- Accessibility: 0 WCAG 2.1 AA violations\n- Error Rate: < 2% of API requests fail\n\nTechnical Context:\n- React 18.3.1 + TypeScript (strict mode) + Vite\n- Follow existing Class Management architecture patterns\n- Axios for HTTP, date-fns for formatting\n- Jest + React Testing Library + Playwright for testing\n- TDD mandatory\n\nDesign Requirements Needed:\n1. Component Architecture (hierarchy, props, state management)\n2. Data Flow and State Management (optimistic updates, error handling)\n3. API Service Layer (function signatures, types, error patterns)\n4. Validation Strategy (form validation, character count, duplicate detection)\n5. Routing Integration (navigation approach, URL structure)\n6. TDD Task Breakdown (atomic tasks with Red-Green-Refactor cycle)\n7. Accessibility Considerations (keyboard nav, ARIA, focus management)\n8. Performance Considerations (memoization, optimization)\n\nConstraints:\n- No Edit Functionality in MVP\n- Single Class Context\n- Backend API follows Class API patterns\n- Mobile responsive required\n\nDeliverables Requested:\n1. Component Architecture Diagram\n2. API Service Specification\n3. Data Flow Diagram\n4. TDD Task Breakdown with risk tiers\n5. Technical Risks and Mitigation\n6. Implementation Estimate Validation\n\nRequest: Please create the technical design and implementation plan following the specification-first TDD methodology defined in CLAUDE.md. The design should be production-ready, following all established patterns from the Class Management feature.",
    "type": "handoff"
  },
  "history": [
    {
      "contextFile": "/Users/dean.gaudet/Documents/code/non-work/commentator-repos/commentator-frontend/.pdd/design/System Architect-1761089555804.md",
      "timestamp": 1761089555804,
      "persona": "System Architect",
      "feature": "design",
      "task": "Outcome Comments Management Feature - Technical Design Request\n\nContext: I have completed the product requirements and user stories for an Outcome Comments Management feature that allows teachers to view, create, and delete outcome comments associated with their classes.\n\nFeature Overview:\n- Complexity Level: L1-MICRO (1-2 weeks, 14 story points)\n- Architecture Review: SKIPPED (L1 level - straightforward CRUD operations)\n- Integration Point: Extends existing Class Management UI with new workflow\n\nUser Stories Delivered (5 Total - 14 Story Points):\n\nMVP Scope - MUST HAVE (13 points):\n1. US-OUTCOME-001: Navigate to Outcome Comments Management (2 pts, HIGH)\n2. US-OUTCOME-002: View Outcome Comments for a Class (3 pts, HIGH)\n3. US-OUTCOME-003: Create New Outcome Comment (5 pts, HIGH)\n4. US-OUTCOME-004: Delete Outcome Comment (3 pts, MEDIUM)\n\nSHOULD HAVE (1 point):\n5. US-OUTCOME-005: Return to Class List (1 pt, MEDIUM)\n\nOutcomeComment Entity Definition:\n- id: number (auto-generated)\n- classId: number (foreign key)\n- commentText: string (10-500 chars, required)\n- createdAt: string (ISO 8601)\n- updatedAt: string (ISO 8601)\n\nValidation Rules:\n- commentText: Required, 10-500 characters, trim whitespace, case-insensitive duplicate detection per class\n- classId: Must reference valid existing class\n- Business Rule: Duplicate comments not allowed within same class\n\nAPI Endpoints Required:\n- GET /outcome-comment?classId=:id\n- POST /outcome-comment\n- DELETE /outcome-comment/:id\n\nSuccess Metrics and Performance Targets:\n- Page Load Time: < 2 seconds\n- API Response Time: < 200ms\n- Test Coverage: 90%+\n- Bundle Size Impact: < 20 KB gzipped\n- Accessibility: 0 WCAG 2.1 AA violations\n- Error Rate: < 2% of API requests fail\n\nTechnical Context:\n- React 18.3.1 + TypeScript (strict mode) + Vite\n- Follow existing Class Management architecture patterns\n- Axios for HTTP, date-fns for formatting\n- Jest + React Testing Library + Playwright for testing\n- TDD mandatory\n\nDesign Requirements Needed:\n1. Component Architecture (hierarchy, props, state management)\n2. Data Flow and State Management (optimistic updates, error handling)\n3. API Service Layer (function signatures, types, error patterns)\n4. Validation Strategy (form validation, character count, duplicate detection)\n5. Routing Integration (navigation approach, URL structure)\n6. TDD Task Breakdown (atomic tasks with Red-Green-Refactor cycle)\n7. Accessibility Considerations (keyboard nav, ARIA, focus management)\n8. Performance Considerations (memoization, optimization)\n\nConstraints:\n- No Edit Functionality in MVP\n- Single Class Context\n- Backend API follows Class API patterns\n- Mobile responsive required\n\nDeliverables Requested:\n1. Component Architecture Diagram\n2. API Service Specification\n3. Data Flow Diagram\n4. TDD Task Breakdown with risk tiers\n5. Technical Risks and Mitigation\n6. Implementation Estimate Validation\n\nRequest: Please create the technical design and implementation plan following the specification-first TDD methodology defined in CLAUDE.md. The design should be production-ready, following all established patterns from the Class Management feature.",
      "type": "handoff",
      "id": "handoff-1761089555804"
    },
    {
      "contextFile": "/Users/dean.gaudet/Documents/code/non-work/commentator-repos/commentator-frontend/.pdd/design/System Architect-1761089293613.md",
      "timestamp": 1761089293613,
      "persona": "System Architect",
      "feature": "design",
      "task": "Outcome Comments Management Feature - Technical Design Request\n\n## Context\nI've completed the product requirements and user stories for an Outcome Comments Management feature that allows teachers to view, create, and delete outcome comments associated with their classes.\n\n## Feature Overview\n- **Complexity Level**: L1-MICRO (1-2 weeks, 14 story points)\n- **Architecture Review**: SKIPPED (L1 level - straightforward CRUD operations)\n- **Integration Point**: Extends existing Class Management UI with new workflow\n\n## User Stories Delivered (5 Total - 14 Story Points)\n\n### MVP Scope - MUST HAVE (13 points)\n1. **US-OUTCOME-001**: Navigate to Outcome Comments Management (2 pts, HIGH)\n   - Add \"Manage Outcome Comments\" button to ClassListItem component\n   - Navigate to new OutcomeComments view with class context\n\n2. **US-OUTCOME-002**: View Outcome Comments for a Class (3 pts, HIGH)\n   - Display list of outcome comments for selected class\n   - Handle loading, empty state, and error states\n   - Sort by creation date (newest first)\n\n3. **US-OUTCOME-003**: Create New Outcome Comment (5 pts, HIGH)\n   - Multi-line text input form with character counter\n   - Validation: required, 10-500 chars, duplicate detection\n   - Optimistic UI updates\n\n4. **US-OUTCOME-004**: Delete Outcome Comment (3 pts, MEDIUM)\n   - Delete button with confirmation dialog\n   - Warning if comment has references (future consideration)\n   - Optimistic UI with rollback on error\n\n### SHOULD HAVE (1 point)\n5. **US-OUTCOME-005**: Return to Class List (1 pt, MEDIUM)\n   - Back navigation with unsaved changes warning\n\n## OutcomeComment Entity Definition\n\n```typescript\ninterface OutcomeComment {\n  id: number                  // Auto-generated integer ID\n  classId: number            // Foreign key to Class entity\n  commentText: string        // Comment text (10-500 chars, required)\n  createdAt: string          // ISO 8601 timestamp (auto-generated)\n  updatedAt: string          // ISO 8601 timestamp (auto-updated)\n}\n```\n\n## Validation Rules\n- **commentText**: Required, 10-500 characters, trim whitespace, case-insensitive duplicate detection per class\n- **classId**: Must reference valid existing class\n- **Business Rule**: Duplicate comments (same text) not allowed within same class\n\n## API Endpoints Required\n- `GET /outcome-comment?classId=:id` - Fetch all comments for a class\n- `POST /outcome-comment` - Create new comment (payload: {classId, commentText})\n- `DELETE /outcome-comment/:id` - Delete comment by ID\n\n## Success Metrics & Performance Targets\n- **Page Load Time**: < 2 seconds for comment list view\n- **API Response Time**: < 200ms for list retrieval\n- **Test Coverage**: â‰¥90% code coverage\n- **Bundle Size Impact**: < 20 KB gzipped for new feature code\n- **Accessibility**: 0 WCAG 2.1 AA violations\n- **Error Rate**: < 2% of API requests fail\n\n## Technical Context\n- **Project**: React 18.3.1 + TypeScript (strict mode) + Vite\n- **Existing Patterns**: Follow Class Management architecture\n  - Service layer: `src/services/api/outcomeCommentService.ts`\n  - Custom hook: `src/hooks/useOutcomeComments.ts`\n  - Components: `src/components/outcomeComments/`\n  - Types: `src/types/OutcomeComment.ts`\n- **HTTP Client**: Axios (already configured via apiClient.ts)\n- **Date Formatting**: date-fns (already installed)\n- **Testing**: Jest + React Testing Library + Playwright (TDD mandatory)\n\n## Design Requirements\n\n### 1. Component Architecture\nPlease design:\n- Component hierarchy and responsibility separation\n- Props interfaces and component contracts\n- State management strategy (local state vs. shared context)\n- Reusable components (Button, Input, Modal already exist)\n- Integration point with ClassListItem component\n\n### 2. Data Flow & State Management\n- Data fetching strategy (on navigation, on mount, etc.)\n- Optimistic updates for create/delete operations\n- Error handling and rollback patterns\n- Loading state management\n- Cache invalidation strategy\n\n### 3. API Service Layer\n- Service function signatures\n- Request/response type definitions\n- Error handling patterns (consistent with classService.ts)\n- Duplicate detection logic (client-side)\n\n### 4. Validation Strategy\n- Form validation approach (inline, on submit, on blur)\n- Character count implementation\n- Duplicate detection UX\n- Error message display patterns\n\n### 5. Routing Integration\n- Navigation approach (if React Router not yet implemented, recommend approach)\n- URL structure for outcome comments view\n- Class context preservation\n- Back navigation handling\n\n### 6. TDD Task Breakdown\nPlease provide atomic tasks following Red-Green-Refactor cycle:\n- Service layer tests (API interactions, error handling)\n- Hook tests (state management, side effects)\n- Component tests (rendering, user interactions, accessibility)\n- E2E test scenarios (complete workflows)\n- Risk tier assignment for each task\n\n### 7. Accessibility Considerations\n- Keyboard navigation patterns\n- ARIA labels and live regions\n- Focus management (especially for modal/dialog)\n- Screen reader announcements\n\n### 8. Performance Considerations\n- Component memoization strategy\n- Event handler optimization (useCallback)\n- List rendering optimization (if 50+ comments)\n- Bundle size impact mitigation\n\n## Constraints & Assumptions\n- **No Edit Functionality**: MVP only includes create/delete (edit is separate story)\n- **Single Class Context**: Feature always operates within one class context\n- **Backend API**: Assume REST API exists and follows same patterns as Class API\n- **Mobile Support**: Must work on mobile devices (responsive design)\n- **Browser Support**: Modern browsers (ES6+), no IE11\n\n## Existing Codebase Patterns to Follow\n- **File Structure**: Mirrors class management structure\n- **Naming Conventions**: PascalCase for components, camelCase for functions/variables\n- **Error Handling**: Consistent error messages and retry patterns\n- **Accessibility**: WCAG 2.1 AA compliance (see .spec/class-management/accessibility-audit.md)\n- **Testing**: 90%+ coverage with comprehensive E2E tests\n\n## Deliverables Requested\n\n1. **Component Architecture Diagram** (Mermaid or text-based)\n2. **API Service Specification** (function signatures, types)\n3. **Data Flow Diagram** (component interactions, state updates)\n4. **TDD Task Breakdown** (atomic tasks with risk tiers, Red-Green-Refactor sequence)\n5. **Technical Risks & Mitigation** (identify potential issues)\n6. **Implementation Estimate Validation** (confirm 14 story points / 1-2 weeks)\n\n## Reference Artifacts Available\n- Full user stories with EARS-format acceptance criteria (provided above)\n- Validation rules and edge cases (detailed in PRD)\n- Success metrics and KPIs (performance targets defined)\n- Existing Class Management implementation (src/components/classes/, src/services/api/classService.ts, src/hooks/useClasses.ts)\n\n## Request\nPlease create the technical design and implementation plan following the specification-first TDD methodology defined in CLAUDE.md. This should include component architecture, API specifications, data flow diagrams, and atomic task breakdown ready for development team execution.\n\nThe design should be production-ready, following all established patterns from the Class Management feature, and enabling parallel frontend/backend development.",
      "type": "handoff",
      "id": "handoff-1761089293613"
    },
    {
      "contextFile": "/Users/dean.gaudet/Documents/code/non-work/commentator-repos/commentator-frontend/.pdd/design/System Architect-1761065403782.md",
      "timestamp": 1761065403782,
      "persona": "System Architect",
      "feature": "design",
      "task": "Class Management Feature Implementation Planning\n\n## Context\nI've completed the product requirements and user stories for a class management feature that allows teachers to add/edit/view a list of classes.\n\n## User Stories Delivered\n- US-CLASS-001: View List of Classes (HIGH - MVP)\n- US-CLASS-002: Add New Class (HIGH - MVP)  \n- US-CLASS-003: Edit Existing Class (MEDIUM - Post-MVP)\n- US-CLASS-004: View Class Details (LOW - Enhancement)\n- US-CLASS-005: Delete Class (LOW - Future)\n\n## Class Entity Fields\n- id (system-generated, unique)\n- name (required, 1-100 chars)\n- year (required, 4-digit year 2000-2099)\n- created_at (auto-generated timestamp)\n- updated_at (auto-updated timestamp)\n\n## Business Rules\n- Name + Year combination must be unique per teacher\n- created_at is immutable after creation\n- updated_at must reflect last modification time\n- Duplicate detection required on client and server side\n- Classes with associated data cannot be deleted\n\n## MVP Scope (Sprint 1)\nFocus on US-CLASS-001 (View List) and US-CLASS-002 (Add Class)\n\n## Next Steps Required\n1. Design component architecture for React frontend\n2. Define REST API endpoints and contracts (coordinate with backend)\n3. Create technical design document with architecture diagrams\n4. Break down into technical tasks following TDD approach\n5. Identify technical risks and dependencies\n6. Define data flow and state management strategy\n\n## Artifacts Available\n- Full user stories with EARS-format acceptance criteria\n- Prioritization rationale and risk assessment\n- Success metrics and KPIs\n- Validation rules and edge cases\n\n## Request\nPlease create the technical design and implementation plan following the specification-first development methodology defined in CLAUDE.md. This should include component architecture, API specifications, and task breakdown ready for development team execution.",
      "type": "handoff",
      "id": "handoff-1761065403782"
    },
    {
      "contextFile": "/Users/dean.gaudet/Documents/code/non-work/commentator-repos/commentator-frontend/.pdd/design/System Architect-1760743209820.md",
      "timestamp": 1760743209820,
      "persona": "System Architect",
      "feature": "design",
      "task": "Class Management Feature Implementation Planning\n\n## Context\nI've completed the product requirements and user stories for a class management feature that allows teachers to add/edit/view a list of classes.\n\n## User Stories Delivered\n- US-CLASS-001: View List of Classes (HIGH - MVP)\n- US-CLASS-002: Add New Class (HIGH - MVP)  \n- US-CLASS-003: Edit Existing Class (MEDIUM - Post-MVP)\n- US-CLASS-004: View Class Details (LOW - Enhancement)\n- US-CLASS-005: Delete Class (LOW - Future)\n\n## Class Entity Fields\n- id (system-generated, unique)\n- name (required, 1-100 chars)\n- year (required, 4-digit year 2000-2099)\n- created_at (auto-generated timestamp)\n- updated_at (auto-updated timestamp)\n\n## Business Rules\n- Name + Year combination must be unique per teacher\n- created_at is immutable after creation\n- updated_at must reflect last modification time\n- Duplicate detection required on client and server side\n- Classes with associated data cannot be deleted\n\n## MVP Scope (Sprint 1)\nFocus on US-CLASS-001 (View List) and US-CLASS-002 (Add Class)\n\n## Next Steps Required\n1. Design component architecture for React frontend\n2. Define REST API endpoints and contracts (coordinate with backend)\n3. Create technical design document with architecture diagrams\n4. Break down into technical tasks following TDD approach\n5. Identify technical risks and dependencies\n6. Define data flow and state management strategy\n\n## Artifacts Available\n- Full user stories with EARS-format acceptance criteria\n- Prioritization rationale and risk assessment\n- Success metrics and KPIs\n- Validation rules and edge cases\n\n## Request\nPlease create the technical design and implementation plan following the specification-first development methodology defined in CLAUDE.md. This should include component architecture, API specifications, and task breakdown ready for development team execution.",
      "type": "handoff",
      "id": "handoff-1760743209820"
    },
    {
      "contextFile": "/Users/dean.gaudet/Documents/code/non-work/commentator-repos/commentator-frontend/.pdd/design/product-owner-1760742723790.md",
      "timestamp": 1760742723790,
      "persona": "product-owner",
      "feature": "design",
      "task": "design",
      "type": "invoke",
      "id": "invoke-1760742723790"
    }
  ],
  "statistics": {
    "totalContextsGenerated": 5,
    "totalHandoffs": 4,
    "mostUsedPersona": "System Architect",
    "lastActive": "2025-10-21T23:32:35.807Z"
  },
  "created": "2025-10-17T23:12:03.795Z",
  "updated": "2025-10-21T23:32:35.807Z"
}